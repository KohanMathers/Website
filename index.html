<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>~/kohan_mathers $</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Base OpenGraph -->
    <meta property="og:title" content="~/kohan_mathers $" />
    <meta property="og:description" content="Asking the useless questions since 2007" />
    <meta property="og:image" content="https://i.imgur.com/MLtqD42.png" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="kmathers.co.uk" />
    <meta name="twitter:card" content="summary_large_image" />

    <style>
        body {
            margin: 0;
            font-family: monospace;
            background-color: #000;
            color: #ccc;
            min-height: 100vh;
        }

        a {
            color: #999;
            text-decoration: none;
        }

        a:hover {
            color: #eee;
        }

        header,
        nav,
        footer,
        main {
            max-width: 64rem;
            margin: 0 auto;
            padding: 1.5rem;
        }

        header,
        nav {
            border-bottom: 1px solid #666;
        }

        footer {
            border-top: 1px solid #666;
            text-align: center;
            font-size: 0.875rem;
            color: #777;
        }

        nav ul {
            list-style: none;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        section {
            margin-top: 3rem;
        }

        h1,
        h2,
        h3 {
            color: #eee;
        }

        h2 {
            border-bottom: 1px solid #666;
            padding-bottom: 0.5rem;
        }

        .italic {
            font-style: italic;
            color: #777;
        }

        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .md-grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .md-grid-4 {
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        }

        .card {
            border: 1px solid #666;
            background-color: rgba(30, 30, 30, 0.5);
            padding: 1rem;
            border-radius: 0.5rem;
            outline: none;
        }

        .card:focus {
            border-color: #fff;
            box-shadow: 0 0 0 1px #fff;
        }

        .photos img {
            width: 100%;
            aspect-ratio: 1 / 1;
            object-fit: cover;
        }

        details[open]::before {
            content: "";
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.75);
            z-index: 99;
        }

        details[open] .popup {
            position: fixed;
            inset: 10%;
            background: #111;
            border: 1px solid #666;
            border-radius: 0.5rem;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .popup img {
            max-width: 100%;
            max-height: 100%;
        }

        .close-button {
            position: absolute;
            top: 0.5rem;
            right: 0.75rem;
            font-size: 2rem;
            color: #f44;
            cursor: pointer;
        }

        .mt-2 {
            margin-top: 0.5rem;
        }

        .mt-1 {
            margin-top: 0.25rem;
        }

        .opacity-70 {
            opacity: 0.7;
        }
    </style>
</head>

<body>

    <header>
        <h1>~/kohan_mathers $</h1>
        <p>Developer · Game Designer · Data Hoarder</p>
        <p class="italic">"Asking the useless questions since 2007"</p>
    </header>

    <nav>
        <ul>
            <li><a href="#welcome">Welcome</a></li>
            <li><a href="#projects">Projects</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="about:blank" class="opacity-70" style="font-size: 0.75rem;">Click for nothing</a></li>
        </ul>
    </nav>

    <main>

        <!-- Welcome Section -->
        <section id="welcome">
            <h2>Welcome to my website</h2>
            <p>Hello, user.</p>
            <p>
                If you're here, you've come to visit my website.
                I'm Kohan Mathers, also known as IEatSystemFiles.
            </p>
            <p>
                I run <a href="https://quietterminal.co.uk/" target="_blank" rel="noopener noreferrer">
                    Quiet Terminal Interactive (QTI)</a>,
                a game studio operating under the principle that being generic was never an option.
            </p>
            <p>
                This site is intentionally simple: mostly HTML, mostly CSS, and only enough JavaScript
                to avoid hating my future self.
            </p>
            <p>
                Enjoy your stay. Or don't. We don't care. [as]
            </p>
        </section>

        <!-- Projects Section -->
        <section id="projects">
            <h2>Current Projects</h2>
            <div id="projects-grid" class="grid md-grid-2">
                <p class="italic">Loading projects…</p>
            </div>
        </section>

        <!-- Contact -->
        <section id="contact">
            <h2>Connect</h2>
            <div class="grid md-grid-2">
                <div>
                    <a href="mailto:mathers.kohan@gmail.com">mathers.kohan@gmail.com</a><br>
                    <a href="https://github.com/kohanmathers" target="_blank" rel="noopener noreferrer">
                        GitHub: kohanmathers
                    </a><br>
                    <a href="discord://-/users/520872721060462592" target="_blank" rel="noopener noreferrer">
                        Discord: IEatSystemFiles
                    </a><br>
                </div>
                <div>
                    <a href="https://quietterminal.co.uk/" target="_blank" rel="noopener noreferrer">QTI Website</a><br>
                    <a href="https://discord.gg/FZuVXszuuM" target="_blank" rel="noopener noreferrer">
                        Discord Server
                    </a>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <p>No cookies. No trackers. Minimal JS.</p>
        <p class="mt-2">Built with semantic HTML and restrained JavaScript © 2026 Kohan Mathers</p>
        <p class="mt-1 opacity-70">Last updated: When I remembered to</p>
    </footer>

    <script>
        let focusedIndex = 0;
        let PROJECTS = [];

        function setMeta(property, content) {
            let tag = document.querySelector(`meta[property="${property}"]`);
            if (!tag) {
                tag = document.createElement("meta");
                tag.setAttribute("property", property);
                document.head.appendChild(tag);
            }
            tag.setAttribute("content", content);
        }

        function generateOGImage(project) {
            const c = document.createElement("canvas");
            c.width = 1200;
            c.height = 630;
            const ctx = c.getContext("2d");

            ctx.fillStyle = "#000";
            ctx.fillRect(0, 0, c.width, c.height);

            ctx.fillStyle = "#eee";
            ctx.font = "48px monospace";
            ctx.fillText(project.name, 60, 140);

            ctx.font = "28px monospace";
            ctx.fillStyle = "#aaa";
            ctx.fillText(project.type, 60, 200);

            ctx.fillStyle = "#666";
            ctx.font = "20px monospace";
            ctx.fillText("kmathers.co.uk", 60, 580);

            return c.toDataURL("image/png");
        }

        function applyProjectOG(slug) {
            const p = PROJECTS.find(x => x.slug === slug);
            if (!p) return;

            setMeta("og:title", p.name);
            setMeta("og:description", p.description);
            setMeta("og:image", generateOGImage(p));
        }

        fetch("projects.json")
            .then(r => r.json())
            .then(data => {
                PROJECTS = data.projects;
                const grid = document.getElementById("projects-grid");
                grid.innerHTML = "";

                PROJECTS.forEach((p, i) => {
                    const card = document.createElement("div");
                    card.className = "card";
                    card.tabIndex = 0;

                    const images = (p.images || []).map(src => `
                <details>
                    <summary><img src="${src}" alt="${p.name} screenshot"></summary>
                    <div class="popup">
                        <span class="close-button" onclick="this.closest('details').removeAttribute('open')">&times;</span>
                        <img src="${src}">
                    </div>
                </details>
            `).join("");

                    card.innerHTML = `
                <h3><a href="#project=${p.slug}">${p.name}</a></h3>
                <p>${p.type}</p>
                <p>${p.description}</p>
                ${images ? `<div class="grid md-grid-4 photos">${images}</div>` : ""}
            `;

                    grid.appendChild(card);
                });

                const hash = location.hash.match(/project=(.+)/);
                if (hash) applyProjectOG(hash[1]);
            });

        document.addEventListener("keydown", e => {
            const cards = document.querySelectorAll(".card");
            if (!cards.length) return;

            if (e.key === "j") cards[Math.min(++focusedIndex, cards.length - 1)].focus();
            if (e.key === "k") cards[Math.max(--focusedIndex, 0)].focus();
            if (e.key === "Escape") {
                document.querySelectorAll("details[open]").forEach(d => d.removeAttribute("open"));
            }
        });

        window.addEventListener("hashchange", () => {
            const hash = location.hash.match(/project=(.+)/);
            if (hash) applyProjectOG(hash[1]);
        });
    </script>

</body>

</html>
